version: "3"

networks:
  external:
    external: true

services:
  bot:
    restart: unless-stopped
    image: ghcr.io/iliazeus/mastodon-rikibooru:master
    volumes:
      - ./state.json:/app/state.json:rw
      - ./booru.json:/app/booru.json:rw
      - ./history.jsonl:/app/history.jsonl:rw
      - ./.env:/app/.env:ro
    networks:
      - external
    deploy:
      resources:
        limits:
          cpus: "0.1"
          memory: 32M
